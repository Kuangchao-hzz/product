webpackJsonp([24],{1785:function(e,t,r){function a(e){r(1891)}var o=r(113)(r(1836),r(1942),a,null,null);e.exports=o.exports},1836:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=r(149),o=r.n(a),s=r(345);t.default={data:function(){return{dialogTitle:"新增用户",tableData:[],roleList:[],defaultCheckedKeys:[],addUserForm:{id:"0",employeeId:"",realName:"",phone:"",remark:"",areaIds:[],roleIds:[],addUserIsShow:!1,treeDialog:{type:!1,name:"",routerAuth:this.$store.state.select.treeCountry,checkedValue:[]}},defaultProps:{children:"children",label:"label"},countryText:[],rules:{employeeId:[{required:!0,message:"请输入工号",trigger:"blur"}],realName:[{required:!0,message:"请输入姓名",trigger:"blur"}],phone:[{required:!0,message:"请输入联系方式",trigger:"blur"}],remark:[{required:!0,message:"请输入备注",trigger:"blur"}],roleIds:[{type:"array",required:!0,message:"请选择角色",trigger:"blur"}],"treeDialog.checkedValue":[{type:"array",required:!0,message:"请选择区域",trigger:"change"}]}}},computed:{handlerCountryText:function(){return this.countryText.join("/")},defaultCheckedData:function(){return this.defaultCheckedKeys}},mounted:function(){this.data_table(),this.data_systemUserRoleList()},methods:{handleClose:function(e){this.addUserForm.employeeId="",this.addUserForm.realName="",this.addUserForm.phone="",this.addUserForm.remark="",this.addUserForm.roleIds=[],this.addUserForm.addUserIsShow=!1,this.$refs.addUserForm.resetFields(),this.addUserForm.treeDialog={type:!1,name:"",routerAuth:this.$store.state.select.treeCountry},this.$refs.tree.setCheckedKeys([])},submitForm:function(){var e=this;this.$refs.tree.getCheckedNodes().forEach(function(t,r){e.addUserForm.area.push(t.id)})},data_table:function(){var e=this;s.a.data_systemUserAll().then(function(t){1===t.data.code?e.tableData=t.data.dat:swal(t.data.msg)})},handler_dataTableLock:function(e,t){var r=this;s.a.edit_systemUserHandlerLock({userId:e.id,lock:t}).then(function(e){if(1===e.data.code){var a=1===t?"你确定解冻该用户?":"你确定冻结该用户?";swal({title:a,type:"warning",showCancelButton:!0,reverseButtons:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"确定!",cancelButtonText:"取消"}).then(function(){r.data_table(),swal("操作成功！")},function(){})}else swal(e.data.msg)})},handlerUserData_edit:function(e){this.addUserForm.addUserIsShow=!0;var t=this;t.$nextTick(function(){if(e.id){t.dialogTitle="编辑用户";var r=e.roleIds.split(",").map(function(e){return parseInt(e)}),a=e.areaIds.split("-").map(function(e){return parseInt(e)});this.$refs.tree.setCheckedKeys(a),this.defaultCheckedKeys=a,this.addUserForm.id=e.id,this.addUserForm.employeeId=e.employeeId,this.addUserForm.realName=e.realName,this.addUserForm.phone=e.phone,this.addUserForm.remark=e.remark,this.addUserForm.roleIds=r}else t.dialogTitle="新增用户",t.$refs.tree.setCheckedKeys([])})},handlerUserData_del:function(e){var t=this;swal({title:"你确定要删除该用户?",type:"warning",showCancelButton:!0,reverseButtons:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"确定!",cancelButtonText:"取消"}).then(function(){s.a.data_systemUserDel({userId:e}).then(function(e){1===e.data.code?(t.data_table(),swal("操作成功！")):swal(e.data.msg)})},function(){})},save_dataTable:function(){var e=this;new o.a(function(t){e.addUserForm.treeDialog.checkedValue=e.$refs.tree.getCheckedNodes(),t()}).then(function(t){e.$refs.addUserForm.validate(function(t){if(!t)return!1;var r=e.$refs.tree.getCheckedKeys().sort(function(e,t){return e-t});s.a.data_systemUserSave({id:e.addUserForm.id,employeeId:e.addUserForm.employeeId,realName:e.addUserForm.realName,phone:e.addUserForm.phone,remark:e.addUserForm.remark,areaIds:r.join("-"),roleIds:e.addUserForm.roleIds.join(",")}).then(function(t){1===t.data.code?(e.data_table(),e.handleClose(),swal("操作成功！")):swal(t.data.msg)})})})},recursiveArea:function(e,t){var r=[];e.forEach(function(e){t.forEach(function(e){var t="";console.log(e),t+=e.id+"-",e.children&&e.children.length>0?e.children.forEach(function(e){t+=e.id+"-"}):r.push(t)})}),console.log(r)},data_systemUserRoleList:function(){var e=this;s.a.data_systemUserRoleList().then(function(t){1===t.data.code&&(e.roleList=t.data.dat)})}}}},1853:function(e,t,r){t=e.exports=r(1752)(!0),t.push([e.i,".view-user .user-group{margin-bottom:20px}.view-user .area-box .el-tree{height:200px;overflow-y:auto;border:1px solid #ddd;border-radius:4px}","",{version:3,sources:["D:/www.github.com/project/product/src/components/manage-system/childrens/user.vue"],names:[],mappings:"AACA,uBACE,kBAAoB,CACrB,AACD,8BACE,aAAc,AACd,gBAAiB,AACjB,sBAAuB,AACvB,iBAAmB,CACpB",file:"user.vue",sourcesContent:["\n.view-user .user-group {\n  margin-bottom: 20px;\n}\n.view-user .area-box .el-tree {\n  height: 200px;\n  overflow-y: auto;\n  border: 1px #ddd solid;\n  border-radius: 4px;\n}\n"],sourceRoot:""}])},1891:function(e,t,r){var a=r(1853);"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);r(1753)("01855cd2",a,!0)},1942:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"view-user"},[r("div",{staticClass:"user-group"},[r("el-button",{on:{click:e.handlerUserData_edit}},[e._v("新增用户")])],1),e._v(" "),r("div",{staticClass:"system-user-table"},[r("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.tableData,border:"","tooltip-effect":"dark"}},[r("el-table-column",{attrs:{prop:"employeeId",align:"center",label:"员工号"}}),e._v(" "),r("el-table-column",{attrs:{prop:"realName",align:"center",label:"姓名"}}),e._v(" "),r("el-table-column",{attrs:{prop:"phone",align:"center",label:"联系方式","show-overflow-tooltip":""}}),e._v(" "),r("el-table-column",{attrs:{prop:"roleNames",align:"center",label:"角色","show-overflow-tooltip":""}}),e._v(" "),r("el-table-column",{attrs:{prop:"remark",align:"center",label:"备注","show-overflow-tooltip":""}}),e._v(" "),r("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{type:"text",size:"small"},on:{click:function(r){e.handlerUserData_edit(t.row)}}},[e._v("编辑")]),e._v(" "),1===t.row.isEnabled?r("el-button",{attrs:{type:"text",size:"small"},on:{click:function(r){e.handler_dataTableLock(t.row,0)}}},[e._v("冻结")]):e._e(),e._v(" "),0===t.row.isEnabled?r("el-button",{attrs:{type:"text",size:"small"},on:{click:function(r){e.handler_dataTableLock(t.row,1)}}},[e._v("解冻")]):e._e(),e._v(" "),r("el-button",{attrs:{type:"text",size:"small"},on:{click:function(r){e.handlerUserData_del(t.row.id)}}},[e._v("删除")])]}}])})],1)],1),e._v(" "),r("el-dialog",{attrs:{title:e.dialogTitle,visible:e.addUserForm.addUserIsShow,size:"small","before-close":e.handleClose},on:{"update:visible":function(t){e.addUserForm.addUserIsShow=t}}},[r("el-form",{ref:"addUserForm",attrs:{model:e.addUserForm,rules:e.rules,"label-width":"80px"}},[r("el-form-item",{attrs:{label:"工号: ",prop:"employeeId"}},[r("el-input",{model:{value:e.addUserForm.employeeId,callback:function(t){e.addUserForm.employeeId=t},expression:"addUserForm.employeeId"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"姓名: ",prop:"realName"}},[r("el-input",{model:{value:e.addUserForm.realName,callback:function(t){e.addUserForm.realName=t},expression:"addUserForm.realName"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"手机号: ",prop:"phone"}},[r("el-input",{model:{value:e.addUserForm.phone,callback:function(t){e.addUserForm.phone=t},expression:"addUserForm.phone"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"备注",prop:"remark"}},[r("el-input",{attrs:{type:"textarea"},model:{value:e.addUserForm.remark,callback:function(t){e.addUserForm.remark=t},expression:"addUserForm.remark"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"角色: ",prop:"roleIds"}},[r("el-checkbox-group",{model:{value:e.addUserForm.roleIds,callback:function(t){e.addUserForm.roleIds=t},expression:"addUserForm.roleIds"}},e._l(e.roleList,function(t,a){return r("el-checkbox",{key:a,attrs:{label:t.val,name:"roleList"}},[e._v(e._s(t.label))])}))],1),e._v(" "),r("el-form-item",{staticClass:"area-box",attrs:{label:"选择区域: ",prop:"treeDialog.checkedValue"}},[r("el-tree",{ref:"tree",attrs:{data:e.addUserForm.treeDialog.routerAuth,"show-checkbox":"","node-key":"id","default-expanded-keys":e.defaultCheckedData,props:e.defaultProps}})],1),e._v(" "),r("el-form-item",{staticStyle:{margin:"0","text-align":"right"}},[r("el-button",{on:{click:function(t){e.addUserForm.addUserIsShow=!1}}},[e._v("取消")]),e._v(" "),r("el-button",{attrs:{type:"primary"},on:{click:e.save_dataTable}},[e._v("确定")])],1)],1)],1)],1)},staticRenderFns:[]}}});
//# sourceMappingURL=24.6a126dec8351767ee080.js.map