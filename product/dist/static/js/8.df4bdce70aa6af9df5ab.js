webpackJsonp([8],{1835:function(e,t,l){function r(e){l(2088)}var o=l(122)(l(2002),l(2138),r,null,null);e.exports=o.exports},1971:function(e,t,l){e.exports={default:l(1972),__esModule:!0}},1972:function(e,t,l){var r=l(55),o=r.JSON||(r.JSON={stringify:JSON.stringify});e.exports=function(e){return o.stringify.apply(o,arguments)}},1979:function(e,t,l){e.exports={default:l(1980),__esModule:!0}},1980:function(e,t,l){l(1982),e.exports=l(55).Object.keys},1981:function(e,t,l){var r=l(91),o=l(55),i=l(107);e.exports=function(e,t){var l=(o.Object||{})[e]||Object[e],a={};a[e]=t(l),r(r.S+r.F*i(function(){l(1)}),"Object",a)}},1982:function(e,t,l){var r=l(236),o=l(124);l(1981)("keys",function(){return function(e){return o(r(e))}})},2002:function(e,t,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=l(1971),o=l.n(r),i=l(1979),a=l.n(i),d=l(384),n=l.n(d),s=l(383);t.default={data:function(){var e=this;return{orderType:["普通","水果","海鲜","冻品"],dialogEditOrder:!1,dialogEditLevel:!1,dialogEditOrderForm:{},dialogEditLevelForm:{},tableData:[],tableDataAuto:[],rules1:{orderType:[{trigger:"change",type:"array",validator:function(e,t,l){if(t.length<1)return l(new Error("请选择订单类别"));l()}}],priceLimit:[{trigger:"blur",validator:function(e,t,l){if(!t)return l(new Error("请输入订单总价上限"));l()}}],amountLimit:[{trigger:"blur",validator:function(e,t,l){if(!t)return l(new Error("请输入每日订单上限"));l()}}]},rules2:{month:[{trigger:"blur",validator:function(t,l,r){var o=e.dialogEditLevelForm;return l?0!==o.index&&l<e.tableDataAuto[o.index-1].month?r(new Error("该等级年限不能小于上一个等级年限")):4!==o.index&&l>e.tableDataAuto[o.index+1].month?r(new Error("该等级年限不能大于下一个等级年限")):void r():r(new Error("请输入工作年限"))}}],orderAmount:[{trigger:"blur",validator:function(t,l,r){var o=e.dialogEditLevelForm;return l?0!==o.index&&l<e.tableDataAuto[o.index-1].orderAmount?r(new Error("该等级订单量不能小于上一个等级订单量")):4!==o.index&&l>e.tableDataAuto[o.index+1].orderAmount?r(new Error("该等级订单量不能大于下一个等级订单量")):void r():r(new Error("请输入订单量"))}}],ontimeRate:[{trigger:"blur",validator:function(t,l,r){var o=e.dialogEditLevelForm;return l?0!==o.index&&l<e.tableDataAuto[o.index-1].ontimeRate?r(new Error("该等级准达率不能小于上一个等级准达率")):4!==o.index&&l>e.tableDataAuto[o.index+1].ontimeRate?r(new Error("该等级准达率不能大于下一个等级准达率")):void r():r(new Error("请输入准达率"))}}],backRate:[{trigger:"blur",validator:function(t,l,r){var o=e.dialogEditLevelForm;return l?0!==o.index&&l>e.tableDataAuto[o.index-1].backRate?r(new Error("该等级退单率不能大于上一个等级退单率")):4!==o.index&&l<e.tableDataAuto[o.index+1].backRate?r(new Error("该等级退单率不能小于下一个等级退单率")):void r():r(new Error("请输入退单率"))}}]}}},mounted:function(){this.data_table(),this.data_tableAuto()},methods:{data_table:function(e){var t=this;s.a.data_deliveryLevelTable({page:e-1||0}).then(function(e){1===e.data.code&&(t.tableData=e.data.dat)})},data_tableAuto:function(e){var t=this;s.a.data_deliveryLevelTableAuto({page:e-1||0}).then(function(e){1===e.data.code&&(t.tableDataAuto=e.data.dat)})},edit_tableDialog:function(e){this.dialogEditOrder=!0,this.dialogEditOrderForm=n()({},e),"所有"===this.dialogEditOrderForm.orderType?this.dialogEditOrderForm.orderType=["普通","水果","海鲜","冻品"]:this.dialogEditOrderForm.orderType=this.dialogEditOrderForm.orderType.split("、")},edit_tableDialogAuto:function(e,t){a()(e).forEach(function(t,l){e[t]=e[t].toString()}),this.dialogEditLevel=!0,this.dialogEditLevelForm=n()({},e,{index:t})},edit_table:function(){var e=this,t=this;this.$refs.dialogEditOrderForm.validate(function(l){if(!l)return!1;t.dialogEditOrderForm.orderType.join("、")===t.orderType.join("、")?t.dialogEditOrderForm.orderType="所有":t.dialogEditOrderForm.orderType=t.dialogEditOrderForm.orderType.join("、"),s.a.edit_deliveryLevelTable(t.dialogEditOrderForm).then(function(l){1===l.data.code&&(t.dialogEditOrder=!1,e.$message({duration:1500,message:"编辑成功！"}),e.$refs.dialogEditOrderForm.resetFields(),t.data_table())})})},edit_tableAuto:function(){var e=this,t=this;this.$refs.dialogEditLevelForm.validate(function(l){if(!l)return!1;var r=t.tableDataAuto,i=t.dialogEditLevelForm.index,d=n()({},t.dialogEditLevelForm);if(a()(d).forEach(function(e,t){d[e]=Number(d[e])}),delete d.id,delete d.level,delete d.index,0===i){var u=n()({},r[i+1]);if(delete u.id,delete u.level,o()(u)===o()(d))return e.$message({duration:1500,message:"该等级不能与下一个等级相同"}),!1}else if(4===i){var c=n()({},r[i-1]);if(delete c.id,delete c.level,o()(c)===o()(d))return e.$message({duration:1500,message:"该等级不能与上一个等级相同"}),!1}else{var v=n()({},r[i+1]),m=n()({},r[i-1]);if(delete v.id,delete v.level,delete m.id,delete m.level,o()(v)===o()(d))return e.$message({duration:1500,message:"该等级不能与下一个等级相同"}),!1;if(o()(m)===o()(d))return e.$message({duration:1500,message:"该等级不能与上一个等级相同"}),!1}s.a.edit_deliveryLevelTableAuto(t.dialogEditLevelForm).then(function(l){t.dialogEditLevel=!1,e.$message({duration:1500,message:"编辑成功！"}),e.$refs.dialogEditLevelForm.resetFields(),t.data_tableAuto()})})},handleClose:function(e){this.dialogEditLevel=!1}}}},2050:function(e,t,l){t=e.exports=l(1820)(!0),t.push([e.i,".delivery-level .delivery-level-tag .el-tag{padding:15px;line-height:0;border-bottom-right-radius:0;border-bottom-left-radius:0;background:#dfe6ec;color:#1f2d3d;font-weight:600}.delivery-level .delivery-level-table{margin-bottom:20px}","",{version:3,sources:["D:/www.github.com/project/product/src/components/manage-delivery/childrens/level.vue"],names:[],mappings:"AACA,4CACE,aAAc,AACd,cAAe,AACf,6BAA8B,AAC9B,4BAA6B,AAC7B,mBAAoB,AACpB,cAAe,AACf,eAAiB,CAClB,AACD,sCACE,kBAAoB,CACrB",file:"level.vue",sourcesContent:["\n.delivery-level .delivery-level-tag .el-tag {\n  padding: 15px;\n  line-height: 0;\n  border-bottom-right-radius: 0;\n  border-bottom-left-radius: 0;\n  background: #dfe6ec;\n  color: #1f2d3d;\n  font-weight: 600;\n}\n.delivery-level .delivery-level-table {\n  margin-bottom: 20px;\n}\n"],sourceRoot:""}])},2088:function(e,t,l){var r=l(2050);"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);l(1821)("e8f9dde8",r,!0)},2138:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",{staticClass:"delivery-level"},[l("div",{staticClass:"delivery-level-tag"},[l("el-tag",[e._v("配送等级接单规则")])],1),e._v(" "),l("div",{staticClass:"delivery-level-table"},[l("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.tableData,border:"","tooltip-effect":"dark"}},[l("el-table-column",{attrs:{align:"center",label:"等级"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(t.row.level+"级")+"\n        ")]}}])}),e._v(" "),l("el-table-column",{attrs:{prop:"orderType",align:"center",label:"订单类别"}}),e._v(" "),l("el-table-column",{attrs:{prop:"priceLimit",align:"center",label:"订单价格上限","show-overflow-tooltip":""}}),e._v(" "),l("el-table-column",{attrs:{prop:"amountLimit",align:"center",label:"订单每日上限","show-overflow-tooltip":""}}),e._v(" "),l("el-table-column",{attrs:{align:"center",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-button",{attrs:{type:"text",size:"small"}},[l("a",{attrs:{href:"javascript:"},on:{click:function(l){e.edit_tableDialog(t.row)}}},[e._v("编辑")])])]}}])})],1)],1),e._v(" "),l("div",{staticClass:"delivery-level-tag"},[l("el-tag",[e._v("配送等级自动升级规则")])],1),e._v(" "),l("div",{staticClass:"delivery-level-table"},[l("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.tableDataAuto,border:"","tooltip-effect":"dark"}},[l("el-table-column",{attrs:{align:"center",label:"等级"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(t.row.level+"级")+"\n        ")]}}])}),e._v(" "),l("el-table-column",{attrs:{prop:"month",align:"center",label:"工作年限(月)"}}),e._v(" "),l("el-table-column",{attrs:{prop:"orderAmount",align:"center",label:"接单量","show-overflow-tooltip":""}}),e._v(" "),l("el-table-column",{attrs:{align:"center",label:"准达率","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(t.row.ontimeRate)+"%\n        ")]}}])}),e._v(" "),l("el-table-column",{attrs:{align:"center",label:"退单率","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(t.row.backRate+"%")+"\n        ")]}}])}),e._v(" "),l("el-table-column",{attrs:{align:"center",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-button",{attrs:{type:"text",size:"small",disabled:""}},[l("a",{attrs:{href:"javascript:",disabled:""},on:{click:function(l){e.edit_tableDialogAuto(t.row,t.$index)}}},[e._v("编辑")])])]}}])})],1)],1),e._v(" "),l("el-dialog",{attrs:{title:"配送等级接单规则设置",visible:e.dialogEditOrder,size:"tiny","before-close":e.handleClose},on:{"update:visible":function(t){e.dialogEditOrder=t}}},[l("el-form",{ref:"dialogEditOrderForm",attrs:{model:e.dialogEditOrderForm,rules:e.rules1,"label-width":"100px"}},[l("el-form-item",{attrs:{label:"等级设置"}},[l("el-input",{staticClass:"reset-border",attrs:{readonly:""},model:{value:e.dialogEditOrderForm.level,callback:function(t){e.dialogEditOrderForm.level=t},expression:"dialogEditOrderForm.level"}})],1),e._v(" "),l("el-form-item",{attrs:{prop:"orderType",label:"订单类别"}},[l("el-checkbox-group",{model:{value:e.dialogEditOrderForm.orderType,callback:function(t){e.dialogEditOrderForm.orderType=t},expression:"dialogEditOrderForm.orderType"}},e._l(e.orderType,function(e,t){return l("el-checkbox",{key:t,attrs:{label:e,name:"type"}})}))],1),e._v(" "),l("el-form-item",{attrs:{prop:"priceLimit",label:"订单总价上限"}},[l("el-input",{model:{value:e.dialogEditOrderForm.priceLimit,callback:function(t){e.dialogEditOrderForm.priceLimit=t},expression:"dialogEditOrderForm.priceLimit"}})],1),e._v(" "),l("el-form-item",{attrs:{prop:"amountLimit",label:"每日订单上限"}},[l("el-input",{model:{value:e.dialogEditOrderForm.amountLimit,callback:function(t){e.dialogEditOrderForm.amountLimit=t},expression:"dialogEditOrderForm.amountLimit"}})],1)],1),e._v(" "),l("span",{staticClass:"dialog-footer",slot:"footer"},[l("el-button",{on:{click:function(t){e.dialogEditOrder=!1}}},[e._v("取 消")]),e._v(" "),l("el-button",{attrs:{type:"primary"},on:{click:e.edit_table}},[e._v("确 定")])],1)],1),e._v(" "),l("el-dialog",{attrs:{title:"配送等级自动升级规则设置",visible:e.dialogEditLevel,size:"tiny","before-close":e.handleClose},on:{"update:visible":function(t){e.dialogEditLevel=t}}},[l("el-form",{ref:"dialogEditLevelForm",attrs:{rules:e.rules2,model:e.dialogEditLevelForm,"label-width":"100px"}},[l("el-form-item",{attrs:{label:"等级设置"}},[l("el-input",{staticClass:"reset-border",attrs:{readonly:""},model:{value:e.dialogEditLevelForm.level,callback:function(t){e.dialogEditLevelForm.level=t},expression:"dialogEditLevelForm.level"}})],1),e._v(" "),l("el-form-item",{attrs:{prop:"month",label:"工作年限"}},[l("el-input",{model:{value:e.dialogEditLevelForm.month,callback:function(t){e.dialogEditLevelForm.month=t},expression:"dialogEditLevelForm.month"}},[l("template",{slot:"append"},[e._v("月")])],2)],1),e._v(" "),l("el-form-item",{attrs:{prop:"orderAmount",label:"订单量"}},[l("el-input",{model:{value:e.dialogEditLevelForm.orderAmount,callback:function(t){e.dialogEditLevelForm.orderAmount=t},expression:"dialogEditLevelForm.orderAmount"}},[l("template",{slot:"append"},[e._v("单")])],2)],1),e._v(" "),l("el-form-item",{attrs:{prop:"ontimeRate",label:"准达率"}},[l("el-input",{model:{value:e.dialogEditLevelForm.ontimeRate,callback:function(t){e.dialogEditLevelForm.ontimeRate=t},expression:"dialogEditLevelForm.ontimeRate"}},[l("template",{slot:"append"},[e._v("%")])],2)],1),e._v(" "),l("el-form-item",{attrs:{prop:"backRate",label:"退单率"}},[l("el-input",{model:{value:e.dialogEditLevelForm.backRate,callback:function(t){e.dialogEditLevelForm.backRate=t},expression:"dialogEditLevelForm.backRate"}},[l("template",{slot:"append"},[e._v("%")])],2)],1)],1),e._v(" "),l("span",{staticClass:"dialog-footer",slot:"footer"},[l("el-button",{on:{click:e.handleClose}},[e._v("取 消")]),e._v(" "),l("el-button",{attrs:{type:"primary"},on:{click:e.edit_tableAuto}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]}}});
//# sourceMappingURL=8.df4bdce70aa6af9df5ab.js.map