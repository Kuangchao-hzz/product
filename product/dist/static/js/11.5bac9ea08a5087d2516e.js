webpackJsonp([11],{1830:function(e,t,a){function r(e){a(1957)}var o=a(121)(a(1879),a(2007),r,"data-v-49351532",null);e.exports=o.exports},1845:function(e,t,a){"use strict";var r=a(165);t.a={details_tableSendTable:function(e){return r.a.get("/web/orderManage/orderDetail",{params:e})},details_tableStoreTable:function(e){return r.a.get("/web/storeManage/detail",{params:e})},details_personData:function(e){return r.a.get("/web/deliveryUserManage/detail",{params:e})},details_personTableData:function(e){return r.a.get("/web/deliveryUserManage/orderList",{params:e})},details_personViewIdCardData:function(e){return r.a.get("/web/deliveryUserManage/viewIdCard",{params:e})},details_handlePersonUpDown:function(e){return r.b.post("/web/deliveryUserManage/changeLevel",e,{responseType:"json"})},details_handlePersonEnabled:function(e){return r.b.post("/web/deliveryUserManage/enable",e)},details_handleOrderBackToYb:function(e){return r.b.post("/web/orderManage/backToYb",e)},details_handleOrderClose:function(e){return r.a.post("/web/orderManage/close",e)},details_handleOrderRePush:function(e){return r.b.post("/web/orderManage/rePush",e)},details_handleOrderManualHandle:function(e){return r.b.post("/web/orderManage/manualHandle",e)},details_submitStore:function(e){return r.a.post("/web/storeManage/edit",e)},details_submitAudit:function(e){return r.a.post("/web/deliveryUserManage/audit",e)}}},1846:function(e,t,a){e.exports={default:a(1847),__esModule:!0}},1847:function(e,t,a){a(1849),e.exports=a(61).Object.assign},1848:function(e,t,a){"use strict";var r=a(123),o=a(235),n=a(166),l=a(375),s=a(376),i=Object.assign;e.exports=!i||a(122)(function(){var e={},t={},a=Symbol(),r="abcdefghijklmnopqrst";return e[a]=7,r.split("").forEach(function(e){t[e]=e}),7!=i({},e)[a]||Object.keys(i({},t)).join("")!=r})?function(e,t){for(var a=l(e),i=arguments.length,d=1,c=o.f,u=n.f;i>d;)for(var b,f=s(arguments[d++]),p=c?r(f).concat(c(f)):r(f),m=p.length,h=0;m>h;)u.call(f,b=p[h++])&&(a[b]=f[b]);return a}:i},1849:function(e,t,a){var r=a(104);r(r.S+r.F,"Object",{assign:a(1848)})},1879:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a(1846),o=a.n(r),n=a(374),l=a(1845);t.default={data:function(){return{loading:!1,closeOrderDialog:!1,searchData:{country:[],storeId:"",abnormalStatus:"",handlerStatus:"",phone:""},storeData:[],tableData:[],closeOrderForm:{reason:"1",remake:"",id:""}}},computed:{tabHeight:function(){return this.$store.state.include.tableHeight-305}},mounted:function(){this.data_table()},methods:{btn_auth:function(e){return this.$store.state.user.AUTHIDS.split(",").some(function(t){return t===e})},fetchStoreData:function(e){this.get_storeOfArea(e[e.length-1])},get_storeOfArea:function(e){var t=this;n.a.fetch_storeOfArea({district:e}).then(function(e){t.searchData.storeId="",t.storeData=[{value:"",label:"请选择门店"}],t.storeData=t.storeData.concat(e.data.dat)})},manualHandle:function(e){var t=this;l.a.details_handleOrderManualHandle({id:e}).then(function(e){t.$message("操作成功！")})},HandleCloseOrder:function(e){this.closeOrderDialog=!0,this.closeOrderForm.id=e},handleClose:function(e){this.closeOrderDialog=!1,this.closeOrderForm.reason="1",this.closeOrderForm.remake="",this.closeOrderForm.id=""},resetForm:function(){this.storeData=[],this.searchData.country=[],this.searchData.abnormalStatus="",this.searchData.handlerStatus="",this.searchData.phone="",this.searchData.storeId=""},tableRowClassName:function(e,t){return 0===t?"info-row-abnormal":1===t?"info-row-error":""},closeOrder:function(){var e=this;l.a.details_handleOrderClose(this.closeOrderForm).then(function(t){e.$message("操作成功！"),e.data_table(),e.handleClose()})},downloadExcel:function(){if(this.tableData.details.length<1)return this.$message("无数据可导出！"),!1;window.location.href="/api/web/orderManage/exportAbnormal?"},data_table:function(e){var t=this,a={page:e-1||0,storeId:t.searchData.storeId,abnormalStatus:t.searchData.abnormalStatus,handlerStatus:t.searchData.handlerStatus,phone:t.searchData.phone,city:"",province:"",district:""};t.searchData.country.length>0&&o()(a,{city:t.searchData.country[1],province:t.searchData.country[0],district:t.searchData.country[2]}),t.loading=!0,n.a.data_orderAbnormalTable(a).then(function(e){t.loading=!1,t.tableData=e.data.dat})},lookDetails:function(e){this.$router.push("/order/abnormalDetails")}}}},1919:function(e,t,a){t=e.exports=a(1811)(!0),t.push([e.i,".wait-abnormal-tag .el-tag[data-v-49351532]{border-bottom-left-radius:0;border-bottom-right-radius:0}.wait-abnormal-table[data-v-49351532]{margin-bottom:20px}.wait-send-pagination[data-v-49351532]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.info-row-abnormal[data-v-49351532]{background:#f60!important;color:#fff!important}.info-row-abnormal .el-table__expand-icon[data-v-49351532]{color:#fff!important}.info-row-abnormal[data-v-49351532]:hover{background:#f60}.info-row-abnormal:hover .el-table__expand-icon[data-v-49351532],.info-row-abnormal:hover>td[data-v-49351532]{background:#f60!important}.info-row-error[data-v-49351532]{background:red!important;color:#fff}.info-row-error .el-table__expand-icon[data-v-49351532]{color:#fff!important}.info-row-error:hover .el-table__expand-icon[data-v-49351532],.info-row-error:hover>td[data-v-49351532],.info-row-error[data-v-49351532]:hover{background:red!important}","",{version:3,sources:["G:/Vue-demo/product/product/src/components/manage-order/childrens/abnormalOrder.vue"],names:[],mappings:"AAGA,4CACE,4BAA6B,AAC7B,4BAA8B,CAC/B,AACD,sCACE,kBAAoB,CACrB,AACD,uCACE,oBAAqB,AACrB,oBAAqB,AACrB,aAAc,AACd,yBAA0B,AACtB,sBAAuB,AACnB,8BAA+B,AACvC,yBAA0B,AACtB,sBAAuB,AACnB,kBAAoB,CAC7B,AACD,oCACE,0BAA4B,AAC5B,oBAAuB,CACxB,AACD,2DACI,oBAAuB,CAC1B,AACD,0CACI,eAAiB,CACpB,AACD,8GACM,yBAA4B,CACjC,AACD,iCACE,yBAA2B,AAC3B,UAAY,CACb,AACD,wDACI,oBAAuB,CAC1B,AAID,+IACM,wBAA2B,CAChC",file:"abnormalOrder.vue",sourcesContent:['\n@charset "UTF-8";\n/*异常标签*/\n.wait-abnormal-tag .el-tag[data-v-49351532] {\n  border-bottom-left-radius: 0;\n  border-bottom-right-radius: 0;\n}\n.wait-abnormal-table[data-v-49351532] {\n  margin-bottom: 20px;\n}\n.wait-send-pagination[data-v-49351532] {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-pack: justify;\n      -ms-flex-pack: justify;\n          justify-content: space-between;\n  -webkit-box-align: center;\n      -ms-flex-align: center;\n          align-items: center;\n}\n.info-row-abnormal[data-v-49351532] {\n  background: #f60 !important;\n  color: #fff !important;\n}\n.info-row-abnormal .el-table__expand-icon[data-v-49351532] {\n    color: #fff !important;\n}\n.info-row-abnormal[data-v-49351532]:hover {\n    background: #f60;\n}\n.info-row-abnormal:hover > td[data-v-49351532], .info-row-abnormal:hover .el-table__expand-icon[data-v-49351532] {\n      background: #f60 !important;\n}\n.info-row-error[data-v-49351532] {\n  background: red !important;\n  color: #fff;\n}\n.info-row-error .el-table__expand-icon[data-v-49351532] {\n    color: #fff !important;\n}\n.info-row-error[data-v-49351532]:hover {\n    background: red !important;\n}\n.info-row-error:hover > td[data-v-49351532], .info-row-error:hover .el-table__expand-icon[data-v-49351532] {\n      background: red !important;\n}\n'],sourceRoot:""}])},1957:function(e,t,a){var r=a(1919);"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);a(1812)("21d1d7ea",r,!0)},2007:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"wait-abnormal-order"},[a("div",{staticClass:"search-table"},[a("el-form",{attrs:{inline:!0}},[a("el-row",{attrs:{gutter:10}},[a("el-col",{attrs:{span:4}},[a("el-form-item",[a("div",{staticClass:"country-select"},[a("el-cascader",{attrs:{options:this.$store.state.select.country,props:this.$store.state.select.defaultCountryProps},on:{change:e.fetchStoreData},model:{value:e.searchData.country,callback:function(t){e.searchData.country=t},expression:"searchData.country"}})],1)])],1),e._v(" "),a("el-col",{attrs:{span:4}},[a("el-form-item",[a("el-select",{attrs:{placeholder:"请选择门店"},model:{value:e.searchData.storeId,callback:function(t){e.searchData.storeId=t},expression:"searchData.storeId"}},e._l(e.storeData,function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.val}})}))],1)],1),e._v(" "),a("el-col",{attrs:{span:4}},[a("el-form-item",[a("el-select",{attrs:{placeholder:"异常类型"},model:{value:e.searchData.abnormalStatus,callback:function(t){e.searchData.abnormalStatus=t},expression:"searchData.abnormalStatus"}},e._l(this.$store.state.select.abnormalType,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1)],1),e._v(" "),a("el-col",{attrs:{span:4}},[a("el-form-item",[a("el-select",{attrs:{placeholder:"处理状态"},model:{value:e.searchData.handlerStatus,callback:function(t){e.searchData.handlerStatus=t},expression:"searchData.handlerStatus"}},e._l(this.$store.state.select.disposeType,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1)],1),e._v(" "),a("el-col",{attrs:{span:4}},[a("el-form-item",[a("el-input",{attrs:{placeholder:"配送员联系方式"},model:{value:e.searchData.phone,callback:function(t){e.searchData.phone=t},expression:"searchData.phone"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:4}},[a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.data_table}},[e._v("查询")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.resetForm}},[e._v("重置")])],1)],1)],1)],1)],1),e._v(" "),a("div",{staticClass:"wait-abnormal-table"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading.body",value:e.loading,expression:"loading",modifiers:{body:!0}}],staticStyle:{width:"100%"},attrs:{data:e.tableData.details,height:e.tabHeight,"max-height":e.tabHeight,border:"","row-class-name":e.tableRowClassName}},[a("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-form",{staticClass:"demo-table-expand",attrs:{"label-position":"left",inline:""}},[a("el-button",{attrs:{type:"primary"}},[a("router-link",{attrs:{to:{path:"/order/orderDetails",query:{orderId:t.row.orderId,detailsType:2}},tag:"span"}},[e._v("查看详情")])],1),e._v(" "),0===t.row.handlerStatus&&99!==t.row.orderStatus?a("el-button",{attrs:{disabled:!e.btn_auth("b_td"),type:"primary"}},[e._v("退单")]):e._e(),e._v(" "),0===t.row.handlerStatus&&99!==t.row.orderStatus?a("el-button",{attrs:{disabled:!e.btn_auth("b_gbdd"),type:"primary"},on:{click:function(a){e.HandleCloseOrder(t.row.id)}}},[e._v("关闭订单")]):e._e(),e._v(" "),0===t.row.handlerStatus&&99!==t.row.orderStatus?a("el-button",{attrs:{disabled:!e.btn_auth("b_rgcl"),type:"primary"},on:{click:function(a){e.manualHandle(t.row.id)}}},[e._v("人工处理")]):e._e()],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{"min-width":"200",align:"center",label:"订单编号"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.orderNo))]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center","min-width":"80",prop:"orderType",label:"类型"}}),e._v(" "),a("el-table-column",{attrs:{prop:"storeName","min-width":"210",align:"center",label:"提货门店","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"mallTime","min-width":"180",label:"订单时间","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{align:"center","min-width":"180",prop:"scheduledTime",label:"需要送达时间","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{label:"订单状态",align:"center","min-width":"100","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(10===t.row.orderStatus?"待抢单":"")+"\n          "+e._s(20===t.row.orderStatus?"抢单中":"")+"\n          "+e._s(30===t.row.orderStatus?"待拣货":"")+"\n          "+e._s(40===t.row.orderStatus?"待验货":"")+"\n          "+e._s(50===t.row.orderStatus?"送货中":"")+"\n          "+e._s(60===t.row.orderStatus?"已送达":"")+"\n          "+e._s(90===t.row.orderStatus?"已退单":"")+"\n          "+e._s(91===t.row.orderStatus?"已拒单":"")+"\n          "+e._s(99===t.row.orderStatus?"已关闭":"")+"\n        ")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"异常类型","min-width":"100",align:"center","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[0===t.row.isAbnormal?a("p",[e._v("无异常")]):a("p",[e._v("\n            "+e._s(1===t.row.abnormalStatus?"无人抢单":"")+"\n            "+e._s(2===t.row.abnormalStatus?"主动退单":"")+"\n            "+e._s(3===t.row.abnormalStatus?"超时未送":"")+"\n            "+e._s(4===t.row.abnormalStatus?"超时未达":"")+"\n            "+e._s(5===t.row.abnormalStatus?"商城关闭":"")+"\n            "+e._s(6===t.row.abnormalStatus?"客户拒单":"")+"\n            "+e._s(7===t.row.abnormalStatus?"商城退换货":"")+"\n          ")])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"处理状态",align:"center","min-width":"100","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[0===t.row.isAbnormal?a("p",[e._v("无异常")]):a("p",[e._v("\n            "+e._s(0===t.row.handlerStatus?"未处理":"")+"\n            "+e._s(-1===t.row.handlerStatus?"自动处理":"")+"\n            "+e._s(1===t.row.handlerStatus?"已处理":"")+"\n          ")])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"配送员","min-width":"150",align:"center","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("p",[e._v(e._s(t.row.realName))]),e._v(" "),a("p",[e._v(e._s(t.row.phone))])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center","min-width":"100",fixed:"right",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("router-link",{attrs:{to:{path:"/order/orderDetails",query:{orderId:t.row.orderId,detailsType:2}}}},[e._v("查看详情")])]}}])})],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"关闭订单",visible:e.closeOrderDialog,size:"small","before-close":e.handleClose},on:{"update:visible":function(t){e.closeOrderDialog=t}}},[a("el-form",{ref:"form",attrs:{model:e.closeOrderForm,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"关闭原因"}},[a("el-select",{attrs:{placeholder:"请选择活动区域"},model:{value:e.closeOrderForm.reason,callback:function(t){e.closeOrderForm.reason=t},expression:"closeOrderForm.reason"}},[a("el-option",{attrs:{label:"客户拒单",value:"1"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"关闭备注"}},[a("el-input",{attrs:{type:"textarea"},model:{value:e.closeOrderForm.remake,callback:function(t){e.closeOrderForm.remake=t},expression:"closeOrderForm.remake"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.closeOrder}},[e._v("确定")]),e._v(" "),a("el-button",{on:{click:function(t){e.closeOrderDialog=!1}}},[e._v("取消")])],1)],1)],1),e._v(" "),a("div",{staticClass:"wait-send-pagination"},[a("div",{staticClass:"other-btn"},[a("el-button",{attrs:{disabled:!e.btn_auth("b_yc_dc_excel"),plain:!0,type:"info"},on:{click:e.downloadExcel}},[e._v("导出excel")])],1),e._v(" "),a("el-pagination",{attrs:{"page-sizes":[20],layout:"total, sizes, prev, pager, next, jumper",total:e.tableData.rowsCount},on:{"current-change":e.data_table}})],1)],1)},staticRenderFns:[]}}});
//# sourceMappingURL=11.5bac9ea08a5087d2516e.js.map