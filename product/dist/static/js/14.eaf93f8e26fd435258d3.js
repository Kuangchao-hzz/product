webpackJsonp([14],{1850:function(e,t,a){function r(e){a(2073)}var o=a(107)(a(2011),a(2123),r,null,null);e.exports=o.exports},1864:function(e,t,a){"use strict";var r=a(123);t.a={details_orderRoutle:function(e){return r.a.get("/web/orderManage/orderRoutle",{params:e})},details_tableSendTable:function(e){return r.a.get("/web/orderManage/orderDetail",{params:e})},details_submitStoreAdd:function(e){return r.a.post("/web/storeManage/add",e)},details_storeAreaData:function(){return r.a.get("/web/commData/allArea")},details_tableStoreTable:function(e){return r.a.get("/web/storeManage/detail",{params:e})},details_personData:function(e){return r.a.get("/web/deliveryUserManage/detail",{params:e})},details_personTableData:function(e){return r.a.get("/web/deliveryUserManage/orderList",{params:e})},details_personViewIdCardData:function(e){return r.a.get("/web/deliveryUserManage/viewIdCard",{params:e})},data_tableAuditCheckPwd:function(e){return r.a.get("/web/deliveryUserManage/checkPwd",{params:e})},details_handlePersonUpDown:function(e){return r.b.post("/web/deliveryUserManage/changeLevel",e,{responseType:"json"})},details_handlePersonEnabled:function(e){return r.b.post("/web/deliveryUserManage/enable",e)},details_handleOrderBackToYb:function(e){return r.b.post("/web/orderManage/backToYb",e)},details_handleOrderClose:function(e){return r.a.post("/web/orderManage/close",e)},details_handleOrderRePush:function(e){return r.b.post("/web/orderManage/rePush",e)},details_handleOrderManualHandle:function(e){return r.b.post("/web/orderManage/manualHandle",e)},again_push:function(e){return r.a.post("/web/systemNotice/repush",e)},delete_push:function(e){return r.a.post("/web/systemNotice/del",e)},details_submitStore:function(e){return r.a.post("/web/storeManage/edit",e)},details_submitAudit:function(e){return r.b.post("/web/deliveryUserManage/audit",e)}}},2011:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a(236),o=a.n(r),l=a(387),s=a.n(l),n=a(386),i=a(1864);t.default={data:function(){return{loading:!1,searchData:{page:0,country:[],orderNo:"",orderType:"",storeId:"",mallTime:[],arriveTime:[],orderStatus:"",phone:"",localStorage:!0},tableData:[],closeOrderForm:{reason:"1",remake:"",id:""},closeOrderDialog:!1,rules:{remake:[{required:!0,message:"请输入关闭备注",trigger:"blur"}]}}},computed:{tabHeight:function(){return this.$store.state.include.tableHeight-365}},mounted:function(){var e=JSON.parse(localStorage.getItem("allOrder_search"));e&&e.localStorage&&(this.searchData=e),this.data_table()},methods:{handleOrderBackToYb:function(e){var t=this;swal({title:"你确定要回退邮包?",type:"warning",showCancelButton:!0,reverseButtons:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(){i.a.details_handleOrderBackToYb({id:e}).then(function(e){1===e.data.code&&(t.$message("操作成功！"),t.data_table())})},function(){})},tableRowClassName:function(e){if(1===e.isAbnormal)return"order-abnormal"},btn_auth:function(e){return this.$store.state.user.AUTHIDS.split(",").some(function(t){return t===e})},HandleCloseOrder:function(e){this.closeOrderDialog=!0,this.closeOrderForm.id=e},handleClose:function(e){this.closeOrderDialog=!1,this.closeOrderForm.reason="1",this.closeOrderForm.remake="",this.closeOrderForm.id="",this.$refs.closeOrderForm.resetFields()},closeOrder:function(){var e=this;this.$refs.closeOrderForm.validate(function(t){if(!t)return!1;i.a.details_handleOrderClose(e.closeOrderForm).then(function(t){1===t.data.code&&(e.$message({duration:1500,message:"操作成功！"}),e.data_table(),e.handleClose())})})},resetForm:function(){this.searchData.country=[],this.searchData.orderType="",this.searchData.orderNo="",this.searchData.storeId="",this.searchData.mallTime=[],this.searchData.arriveTime=[],this.searchData.orderStatus="",this.searchData.phone="",this.data_table()},downloadExcel:function(){if(this.tableData.details.length<1)return this.$message({duration:1500,message:"无数据可导出！"}),!1;window.location.href="/api/web/orderManage/exportAllOrder?"},lookDetails:function(e){this.$router.push("/order/allDetails")},data_table:function(e){var t=this,a={page:e-1||t.searchData.page,orderNo:t.searchData.orderNo,orderType:t.searchData.orderType,storeId:t.searchData.storeId,orderStatus:t.searchData.orderStatus,arriveTimeBegin:"",arriveTimeEnd:"",mallTimeBegin:"",mallTimeEnd:"",city:"",province:"",district:"",phone:t.searchData.phone};t.searchData.arriveTime.length>0&&s()(a,{arriveTimeBegin:new Date(t.searchData.arriveTime[1]).Format("yyyy-MM-dd"),arriveTimeEnd:new Date(t.searchData.arriveTime[0]).Format("yyyy-MM-dd")}),t.searchData.mallTime.length>0&&s()(a,{mallTimeBegin:new Date(t.searchData.mallTime[1]).Format("yyyy-MM-dd"),mallTimeEnd:new Date(t.searchData.mallTime[0]).Format("yyyy-MM-dd")}),t.searchData.country.length>0&&s()(a,{city:t.searchData.country[1],province:t.searchData.country[0],district:t.searchData.country[2]}),t.loading=!0,n.a.data_orderAllTable(a).then(function(e){t.loading=!1,1===e.data.code&&(localStorage.setItem("allOrder_search",o()(t.searchData)),t.tableData=e.data.dat)})},Format:function(e,t){var a=new Date(e),r={"M+":a.getMonth()+1,"d+":a.getDate(),"h+":a.getHours(),"m+":a.getMinutes(),"s+":a.getSeconds(),"q+":Math.floor((a.getMonth()+3)/3),S:a.getMilliseconds()};/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(a.getFullYear()+"").substr(4-RegExp.$1.length)));for(var o in r)new RegExp("("+o+")").test(t)&&(t=t.replace(RegExp.$1,2===RegExp.$1.length?r[o]:("00"+r[o]).substr((""+r[o]).length)));return t}},beforeRouteLeave:function(e,t,a){"/order/orderDetails"!==e.path&&localStorage.setItem("allOrder_search",null),a()}}},2035:function(e,t,a){t=e.exports=a(1829)(!0),t.push([e.i,".wait-all-table{margin-bottom:20px}.wait-all-table .order-abnormal{background:red}.wait-send-pagination{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;-webkit-box-align:center;-ms-flex-align:center;align-items:center}","",{version:3,sources:["D:/www.github.com/project/product/src/components/manage-order/childrens/allOrder.vue"],names:[],mappings:"AACA,gBACE,kBAAoB,CACrB,AACD,gCACI,cAAgB,CACnB,AACD,sBACE,oBAAqB,AACrB,oBAAqB,AACrB,aAAc,AACd,yBAA0B,AACtB,sBAAuB,AACnB,8BAA+B,AACvC,yBAA0B,AACtB,sBAAuB,AACnB,kBAAoB,CAC7B",file:"allOrder.vue",sourcesContent:["\n.wait-all-table {\n  margin-bottom: 20px;\n}\n.wait-all-table .order-abnormal {\n    background: red;\n}\n.wait-send-pagination {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-pack: justify;\n      -ms-flex-pack: justify;\n          justify-content: space-between;\n  -webkit-box-align: center;\n      -ms-flex-align: center;\n          align-items: center;\n}\n"],sourceRoot:""}])},2073:function(e,t,a){var r=a(2035);"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);a(1830)("2ba713ed",r,!0)},2123:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"wait-all-order"},[a("div",{staticClass:"search-table"},[a("el-form",{staticClass:"search-form",attrs:{inline:!0}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:6}},[a("el-form-item",[a("el-input",{attrs:{placeholder:"订单编号"},model:{value:e.searchData.orderNo,callback:function(t){e.searchData.orderNo=t},expression:"searchData.orderNo"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",[a("el-input",{attrs:{placeholder:"配送员联系方式"},model:{value:e.searchData.phone,callback:function(t){e.searchData.phone=t},expression:"searchData.phone"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",[a("el-date-picker",{attrs:{type:"daterange",placeholder:"用户下单时间"},model:{value:e.searchData.mallTime,callback:function(t){e.searchData.mallTime=t},expression:"searchData.mallTime"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",[a("el-date-picker",{attrs:{type:"daterange",placeholder:"送达时间"},model:{value:e.searchData.arriveTime,callback:function(t){e.searchData.arriveTime=t},expression:"searchData.arriveTime"}})],1)],1)],1),e._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:6}},[a("el-form-item",[a("div",{staticClass:"country-select"},[a("el-cascader",{attrs:{options:this.$store.state.select.country,props:this.$store.state.select.defaultCountryProps,placeholder:"请选择区域","change-on-select":""},model:{value:e.searchData.country,callback:function(t){e.searchData.country=t},expression:"searchData.country"}})],1)])],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",[a("el-select",{attrs:{placeholder:"订单类型"},model:{value:e.searchData.orderType,callback:function(t){e.searchData.orderType=t},expression:"searchData.orderType"}},e._l(this.$store.state.select.orderType,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",[a("el-select",{attrs:{placeholder:"订单状态"},model:{value:e.searchData.orderStatus,callback:function(t){e.searchData.orderStatus=t},expression:"searchData.orderStatus"}},e._l(this.$store.state.select.orderStatus,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1)],1),e._v(" "),a("el-col",{attrs:{span:4}},[a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.data_table}},[e._v("查询")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.resetForm}},[e._v("重置")])],1)],1)],1)],1)],1),e._v(" "),a("div",{staticClass:"wait-all-table"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading.body",value:e.loading,expression:"loading",modifiers:{body:!0}}],ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.tableData.details,height:e.tabHeight,"max-height":e.tabHeight,border:"","tooltip-effect":"dark","row-class-name":e.tableRowClassName}},[a("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-form",{staticClass:"demo-table-expand",attrs:{"label-position":"left",inline:""}},[a("router-link",{attrs:{to:{path:"/order/orderDetails",query:{orderId:t.row.id,detailsType:3}},tag:"span"}},[a("el-button",{attrs:{type:"primary"}},[e._v("订单详情")])],1),e._v(" "),85===t.row.orderStatus||t.row.orderStatus<60?a("el-button",{attrs:{disabled:!e.btn_auth("b_xq_td"),type:"primary"},on:{click:function(a){e.handleOrderBackToYb(t.row.id)}}},[e._v("回退邮包")]):e._e(),e._v(" "),85===t.row.orderStatus||t.row.orderStatus<60?a("el-button",{attrs:{disabled:!e.btn_auth("b_xq_gbdd"),type:"primary"},on:{click:function(a){e.HandleCloseOrder(t.row.id)}}},[e._v("关闭订单")]):e._e()],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center","min-width":"200",label:"订单编号"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.orderNo))]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center","min-width":"80",prop:"orderType",label:"类型"}}),e._v(" "),a("el-table-column",{attrs:{align:"center","min-width":"210",prop:"storeName",label:"提货门店","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{align:"center","min-width":"210",prop:"receiverAddress",label:"送货地点","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{prop:"orderTime",align:"center","min-width":"180",label:"用户下单时间","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{align:"center","min-width":"180",prop:"orderTime",label:"邮包推送时间","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{align:"center","min-width":"180",prop:"scheduledTime",label:"期望送达时间","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{label:"订单状态",align:"center","min-width":"100","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(10===t.row.orderStatus?"待抢单":"")+"\n          "+e._s(20===t.row.orderStatus?"抢单中":"")+"\n          "+e._s(30===t.row.orderStatus?"待拣货":"")+"\n          "+e._s(40===t.row.orderStatus?"待提货":"")+"\n          "+e._s(50===t.row.orderStatus?"送货中":"")+"\n          "+e._s(60===t.row.orderStatus?"已送达":"")+"\n          "+e._s(85===t.row.orderStatus?"退单中":"")+"\n          "+e._s(90===t.row.orderStatus?"已退单":"")+"\n          "+e._s(91===t.row.orderStatus?"已拒单":"")+"\n          "+e._s(99===t.row.orderStatus?"已关闭":"")+"\n        ")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"推送状态",align:"center","min-width":"100","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(0===t.row.isPushed?"未推送":"")+"\n          "+e._s(1===t.row.isPushed?"已推送":"")+"\n        ")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"配送员","min-width":"150",align:"center","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("p",[e._v(e._s(t.row.realName))]),e._v(" "),a("p",[e._v(e._s(t.row.phone))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"是否异常",align:"center","min-width":"100","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[0===t.row.isAbnormal?a("p",[e._v("无异常")]):a("p",[e._v("异常")])]}}])})],1)],1),e._v(" "),a("div",{staticClass:"wait-send-pagination"},[a("div",{staticClass:"other-btn"},[a("el-button",{attrs:{disabled:!e.btn_auth("b_qb_dc_excel"),plain:!0,type:"info"},on:{click:e.downloadExcel}},[e._v("导出excel")])],1),e._v(" "),a("el-pagination",{attrs:{"page-sizes":[20],layout:"total, sizes, prev, pager, next, jumper",total:e.tableData.rowsCount},on:{"current-change":e.data_table}})],1),e._v(" "),a("el-dialog",{attrs:{title:"关闭订单",visible:e.closeOrderDialog,size:"small","before-close":e.handleClose},on:{"update:visible":function(t){e.closeOrderDialog=t}}},[a("el-form",{ref:"closeOrderForm",attrs:{rules:e.rules,model:e.closeOrderForm,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"关闭原因"}},[a("el-select",{attrs:{placeholder:"请选择活动区域"},model:{value:e.closeOrderForm.reason,callback:function(t){e.closeOrderForm.reason=t},expression:"closeOrderForm.reason"}},[a("el-option",{attrs:{label:"客户拒单",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"其他原因",value:"2"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{prop:"remake",label:"关闭备注"}},[a("el-input",{attrs:{type:"textarea"},model:{value:e.closeOrderForm.remake,callback:function(t){e.closeOrderForm.remake=t},expression:"closeOrderForm.remake"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.closeOrder}},[e._v("确定")]),e._v(" "),a("el-button",{on:{click:e.handleClose}},[e._v("取消")])],1)],1)],1)],1)},staticRenderFns:[]}}});
//# sourceMappingURL=14.eaf93f8e26fd435258d3.js.map