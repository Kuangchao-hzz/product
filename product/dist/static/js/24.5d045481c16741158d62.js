webpackJsonp([24],{1856:function(t,a,e){function n(t){e(2100)}var o=e(108)(e(2017),e(2150),n,"data-v-c0bd71e2",null);t.exports=o.exports},2017:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var n,o,i,s=e(388),r=e.n(s),d=e(2155),c=e.n(d),p=e(2156),l=e.n(p),A=e(387);a.default={data:function(){return{mapFilter:["1","2","3"],mapData:{},country:[],defaultInitStatus:!0,change:1,mapReqDataParams:{},personInfoData:{},countryText:[],checkedNodesData:[],defaultTreeData:[],treeDefaultChecked:[],copyMapData:[],treeDialog:{type:!1,name:"",routerAuth:[]},defaultProps:{children:"children",label:"label"}}},computed:{handlerCountryText:function(){return this.countryText.join(",")},treeCountry:function(){var t=this.$store.state.select.treeCountry;return this.defaultTreeData=t,t},amapMapData:function(){return this.mapData}},mounted:function(){var t=this;localStorage.setItem("map_zoom",12),this.setAllCheckedNodes(),n=setInterval(function(){t.change=0,t.defaultInit(),t.init(),t.fetch_mapData()},12e5)},methods:{mapFilterFn:function(){this.change=0,this.defaultInit(),this.init(),this.fetch_mapData()},setAllCheckedNodes:function(){var t=this;this.$nextTick(function(){t.$refs.tree.setCheckedNodes(t.$store.state.select.treeCountry),t.getCheckedNodes()})},resetCheckedNodes:function(){this.$refs.tree.setCheckedKeys([]),this.getCheckedNodes()},getCheckedNodes:function(){var t=this;this.change=1,this.checkedNodesData=this.$refs.tree.getCheckedNodes(),this.countryText=[];var a=[];this.checkedNodesData.forEach(function(t,e){a.push(t.id)}),this.checkedNodesData.forEach(function(e,n){-1===a.indexOf(e.pid)&&t.countryText.push(e.label)}),this.fetch_mapData()},fetch_mapData:function(t){var a=this,e=r()({},this.mapReqDataParams,{provinces:[],cities:[],districts:[],storeIds:[],change:this.change});a.treeDefaultChecked=[],a.checkedNodesData.forEach(function(t,n){a.treeDefaultChecked.push(t.id),t.id<=200?e.provinces.push(t.id):t.id<=2e3&&t.id>200?e.cities.push(t.id):t.id<=2e4&&t.id>2e3?e.districts.push(t.id):e.storeIds.push(t.id)}),a.data_table(e)},fetchStoreData:function(t){this.defaultInitStatus=!0},defaultInit:function(){var t=this,a=this.mapData;o=new c.a.Map("container",{center:[a.point.x,a.point.y],zoom:12});var e=o.getBounds(),n=o.getCenter();localStorage.setItem("map_zoom",o.getZoom());var i={lng:n.lng,lat:n.lat,lng1:e.southwest.lng,lat1:e.southwest.lat,lng2:e.northeast.lng,lat2:e.northeast.lat};r()(this.mapReqDataParams,i),this.change=0,c.a.event.addListener(o,"dragend",function(a){var e=o.getBounds(),n=o.getCenter();localStorage.setItem("map_zoom",o.getZoom());var i={lng:n.lng,lat:n.lat,lng1:e.southwest.lng,lat1:e.southwest.lat,lng2:e.northeast.lng,lat2:e.northeast.lat};r()(t.mapReqDataParams,i),t.change=0,t.fetch_mapData()}),this.defaultInitStatus=!1},init:function(){var t=this,a=this.mapData;l.a.loadUI(["overlay/SimpleInfoWindow","overlay/SimpleMarker"],function(e,n){if(o.setZoom(localStorage.getItem("map_zoom")),a.userPoints.length>0){a.userPoints.filter(function(a){var e=1;if(e=null===a.workStatus?1:a.workStatus,-1!==t.mapFilter.indexOf(String(e)))return!0}).forEach(function(t,a){function s(a){var n="",s="";switch(a.workStatus){case 3:n="禁止接单";break;case 2:n="配送中";break;default:n="休息中"}a.orders.length>0?a.orders.forEach(function(t,a){s+='<a href="#/order/orderDetails?orderId='+t.orderId+'">'+t.orderNo+"</a>"}):s="暂无订单",i=new e({infoTitle:"<strong>"+a.realName+"</strong>",infoBody:"<P><span>手机：</span><span>"+a.phone+"</span></P><p><span>等级：</span><span>"+a.level+"</span></p><p><span>当前状态：</span><span>"+n+"</span>("+t.limitText+")</p><p><span>当前订单：</span><span>"+s+"</span></p>",offset:new c.a.Pixel(0,-31)}).open(o,p.getPosition()),o.on("click",function(t){o.clearInfoWindow()})}var r="green",d="";switch(t.workStatus){case 3:r="green",d="限";break;case 2:r="blue",d="送";break;default:r="gray",d="休"}var p=new n({iconLabel:{innerHTML:"<span>"+d+"</span>",style:{color:"#fff"}},iconTheme:"default",iconStyle:r,map:o,position:[t.loc.x,t.loc.y]});p.setMap(o),c.a.event.addListener(p,"click",function(){A.a.data_personMapInfo({id:t.id}).then(function(t){1===t.data.code&&s(t.data.dat)})})})}c.a.plugin(["AMap.ToolBar","AMap.Scale"],function(){o.addControl(new c.a.ToolBar),o.addControl(new c.a.Scale)})})},data_table:function(t){var a=this;A.a.data_personMapTable(t).then(function(e){1===e.data.code&&(a.mapData=e.data.dat,1===t.change&&a.defaultInit(),a.init())})},fetch_Data:function(t){var a=this;A.a.data_personMapInfo({id:t}).then(function(t){1===t.data.code&&(a.personInfoData=t.data.dat)})}},watch:{mapData:function(){this.defaultInitStatus&&this.defaultInit()},country:function(){this.change=1,this.fetch_mapData()}},beforeRouteLeave:function(t,a,e){clearInterval(n),e()}}},2062:function(t,a,e){a=t.exports=e(1830)(!0),a.push([t.i,'.person-map .el-tree[data-v-c0bd71e2]{height:600px;overflow-y:auto;border:1px solid #ddd;border-radius:4px}.person-map .country-select[data-v-c0bd71e2]{margin-bottom:20px}.person-map .country-select span[data-v-c0bd71e2]{color:#666}.person-map .map-box-card[data-v-c0bd71e2]{width:900px;margin-bottom:20px}.person-map .map-box-card .card-content[data-v-c0bd71e2]{display:-webkit-box;display:-ms-flexbox;display:flex}.person-map .map-box-card .card-content .card-item[data-v-c0bd71e2]{width:200px;display:table;box-sizing:border-box;padding:5px 20px}.person-map .map-box-card .card-content .card-item label[data-v-c0bd71e2]{display:table-cell;vertical-align:middle;text-align:left}.person-map .map-box-card .card-content .card-item span[data-v-c0bd71e2]{display:table-cell;position:relative;float:left;width:100%;text-align:right;margin-bottom:0}.person-map .map-box-content[data-v-c0bd71e2]{width:100%;display:-webkit-box;display:-ms-flexbox;display:flex;border-radius:5px}.person-map .map-box-content .box-content-win[data-v-c0bd71e2]{width:100%;overflow:hidden;background:#fff;margin-bottom:20px}.person-map .map-box-content .box-content-win>div[data-v-c0bd71e2]{width:100%;height:600px;border-radius:4px;margin-right:20px}.person-map .map-box-content .box-content-info[data-v-c0bd71e2]{width:280px;height:300px;background:#c2e1f7;color:#012b6b}.person-map .map-box-content .box-content-info h5[data-v-c0bd71e2]{padding:20px 0 20px 20px;font-size:18px;position:relative;font-weight:400}.person-map .map-box-content .box-content-info h5[data-v-c0bd71e2]:before{content:"";display:block;width:4px;height:30px;background:#012b6b;position:absolute;left:0;top:50%;-webkit-transform:translateY(-50%);transform:translateY(-50%)}.person-map .map-box-content .box-content-info .info-item[data-v-c0bd71e2]{display:table;padding:5px 10px;overflow:hidden;vertical-align:middle}.person-map .map-box-content .box-content-info .info-item label[data-v-c0bd71e2]{width:100px;display:table-cell}.person-map .map-box-content .box-content-info .info-item span[data-v-c0bd71e2]{display:block}',"",{version:3,sources:["G:/Vue-demo/product/product/src/components/manage-person/childrens/map.vue"],names:[],mappings:"AACA,sCACE,aAAc,AACd,gBAAiB,AACjB,sBAAuB,AACvB,iBAAmB,CACpB,AACD,6CACE,kBAAoB,CACrB,AACD,kDACI,UAAY,CACf,AACD,2CACE,YAAa,AACb,kBAAoB,CACrB,AACD,yDACI,oBAAqB,AACrB,oBAAqB,AACrB,YAAc,CACjB,AACD,oEACM,YAAa,AACb,cAAe,AACf,sBAAuB,AACvB,gBAAkB,CACvB,AACD,0EACQ,mBAAoB,AACpB,sBAAuB,AACvB,eAAiB,CACxB,AACD,yEACQ,mBAAoB,AACpB,kBAAmB,AACnB,WAAY,AACZ,WAAY,AACZ,iBAAkB,AAClB,eAAiB,CACxB,AACD,8CACE,WAAY,AACZ,oBAAqB,AACrB,oBAAqB,AACrB,aAAc,AACd,iBAAmB,CACpB,AACD,+DACI,WAAY,AACZ,gBAAiB,AACjB,gBAAiB,AACjB,kBAAoB,CACvB,AACD,mEACM,WAAY,AACZ,aAAc,AACd,kBAAmB,AACnB,iBAAmB,CACxB,AACD,gEACI,YAAa,AACb,aAAc,AACd,mBAAoB,AACpB,aAAe,CAClB,AACD,mEACM,yBAA0B,AAC1B,eAAgB,AAChB,kBAAmB,AACnB,eAAoB,CACzB,AACD,0EACQ,WAAY,AACZ,cAAe,AACf,UAAW,AACX,YAAa,AACb,mBAAoB,AACpB,kBAAmB,AACnB,OAAQ,AACR,QAAS,AACT,mCAAoC,AAC5B,0BAA4B,CAC3C,AACD,2EACM,cAAe,AACf,iBAAkB,AAClB,gBAAiB,AACjB,qBAAuB,CAC5B,AACD,iFACQ,YAAa,AACb,kBAAoB,CAC3B,AACD,gFACQ,aAAe,CACtB",file:"map.vue",sourcesContent:["\n.person-map .el-tree[data-v-c0bd71e2] {\n  height: 600px;\n  overflow-y: auto;\n  border: 1px #ddd solid;\n  border-radius: 4px;\n}\n.person-map .country-select[data-v-c0bd71e2] {\n  margin-bottom: 20px;\n}\n.person-map .country-select span[data-v-c0bd71e2] {\n    color: #666;\n}\n.person-map .map-box-card[data-v-c0bd71e2] {\n  width: 900px;\n  margin-bottom: 20px;\n}\n.person-map .map-box-card .card-content[data-v-c0bd71e2] {\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n}\n.person-map .map-box-card .card-content .card-item[data-v-c0bd71e2] {\n      width: 200px;\n      display: table;\n      box-sizing: border-box;\n      padding: 5px 20px;\n}\n.person-map .map-box-card .card-content .card-item label[data-v-c0bd71e2] {\n        display: table-cell;\n        vertical-align: middle;\n        text-align: left;\n}\n.person-map .map-box-card .card-content .card-item span[data-v-c0bd71e2] {\n        display: table-cell;\n        position: relative;\n        float: left;\n        width: 100%;\n        text-align: right;\n        margin-bottom: 0;\n}\n.person-map .map-box-content[data-v-c0bd71e2] {\n  width: 100%;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  border-radius: 5px;\n}\n.person-map .map-box-content .box-content-win[data-v-c0bd71e2] {\n    width: 100%;\n    overflow: hidden;\n    background: #fff;\n    margin-bottom: 20px;\n}\n.person-map .map-box-content .box-content-win > div[data-v-c0bd71e2] {\n      width: 100%;\n      height: 600px;\n      border-radius: 4px;\n      margin-right: 20px;\n}\n.person-map .map-box-content .box-content-info[data-v-c0bd71e2] {\n    width: 280px;\n    height: 300px;\n    background: #c2e1f7;\n    color: #012b6b;\n}\n.person-map .map-box-content .box-content-info h5[data-v-c0bd71e2] {\n      padding: 20px 0 20px 20px;\n      font-size: 18px;\n      position: relative;\n      font-weight: normal;\n}\n.person-map .map-box-content .box-content-info h5[data-v-c0bd71e2]::before {\n        content: '';\n        display: block;\n        width: 4px;\n        height: 30px;\n        background: #012b6b;\n        position: absolute;\n        left: 0;\n        top: 50%;\n        -webkit-transform: translateY(-50%);\n                transform: translateY(-50%);\n}\n.person-map .map-box-content .box-content-info .info-item[data-v-c0bd71e2] {\n      display: table;\n      padding: 5px 10px;\n      overflow: hidden;\n      vertical-align: middle;\n}\n.person-map .map-box-content .box-content-info .info-item label[data-v-c0bd71e2] {\n        width: 100px;\n        display: table-cell;\n}\n.person-map .map-box-content .box-content-info .info-item span[data-v-c0bd71e2] {\n        display: block;\n}\n"],sourceRoot:""}])},2100:function(t,a,e){var n=e(2062);"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);e(1831)("12da57e1",n,!0)},2150:function(t,a){t.exports={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"person-map"},[e("el-row",{attrs:{gutter:20}},[e("el-col",{attrs:{span:6}},[e("div",{staticClass:"country-select"},[e("span",[t._v("请选择区域 : "+t._s(t.handlerCountryText)+"  ")])]),t._v(" "),e("div",[e("el-form",{attrs:{model:t.treeDialog,"label-width":"0"}},[e("el-form-item",{staticClass:"area-box"},[e("el-tree",{ref:"tree",attrs:{data:this.treeCountry,"node-key":"id","default-expand-all":"","show-checkbox":"",props:t.defaultProps}})],1),t._v(" "),e("el-form-item",{staticStyle:{"text-align":"right"}},[e("el-button",{on:{click:t.resetCheckedNodes}},[t._v("重置")]),t._v(" "),e("el-button",{on:{click:t.setAllCheckedNodes}},[t._v("全选")]),t._v(" "),e("el-button",{attrs:{type:"primary"},on:{click:t.getCheckedNodes}},[t._v("确定")])],1)],1)],1)]),t._v(" "),e("el-col",{attrs:{span:18}},[e("div",{staticClass:"content-map"},[e("div",{staticClass:"map-box-card"},[e("el-card",{staticClass:"box-card"},[e("div",{staticClass:"card-content"},[e("div",{staticClass:"card-item"},[e("label",[t._v("待配送订单：")]),t._v(" "),e("span",[t._v(t._s(t.mapData.dpsCount))])]),t._v(" "),e("div",{staticClass:"card-item"},[e("label",[t._v("配送中订单：")]),t._v(" "),e("span",[t._v(t._s(t.mapData.pszCount))])]),t._v(" "),e("div",{staticClass:"card-item"},[e("label",[t._v("今日已送达订单：")]),t._v(" "),e("span",[t._v(t._s(t.mapData.psyCount))])]),t._v(" "),e("div",{staticClass:"card-item"},[e("label",[t._v("配送员数量：")]),t._v(" "),e("span",[t._v(t._s(t.mapData.psyCount))])])])])],1),t._v(" "),e("el-col",{staticStyle:{"margin-bottom":"15px"},attrs:{span:24}},[e("el-checkbox-group",{on:{change:t.mapFilterFn},model:{value:t.mapFilter,callback:function(a){t.mapFilter=a},expression:"mapFilter"}},[e("el-checkbox",{attrs:{label:"1"}},[t._v("休息中")]),t._v(" "),e("el-checkbox",{attrs:{label:"2"}},[t._v("配送中")]),t._v(" "),e("el-checkbox",{attrs:{label:"3"}},[t._v("禁止接单")])],1)],1),t._v(" "),e("div",{staticClass:"map-box-content"},[e("div",{staticClass:"box-content-win"},[e("div",{staticClass:"amap-wrapper",attrs:{id:"container"}})]),t._v(" "),t.personInfoData.id?e("div",{staticClass:"box-content-info"},[e("h5",[t._v("配送员信息")]),t._v(" "),e("div",{staticClass:"info-item"},[e("label",[t._v("配送:")]),t._v(" "),e("span",[e("router-link",{attrs:{to:{path:"/person/personDetails",query:{id:t.personInfoData.id}}}},[t._v(t._s(t.personInfoData.realName))])],1)]),t._v(" "),e("div",{staticClass:"info-item"},[e("label",[t._v("手机:")]),t._v(" "),e("span",[t._v(t._s(t.personInfoData.phone))])]),t._v(" "),e("div",{staticClass:"info-item"},[e("label",[t._v("等级:")]),t._v(" "),e("span",[t._v(t._s(t.personInfoData.level+"级"))])]),t._v(" "),e("div",{staticClass:"info-item"},[e("label",[t._v("当前状态:")]),t._v(" "),t.personInfoData.workStatus?e("span",[t._v("\n                "+t._s("1"==t.personInfoData.workStatus?"抢单中":"")+"\n                "+t._s("2"==t.personInfoData.workStatus?"休息中":"")+"\n                "+t._s("3"==t.personInfoData.workStatus?"配送中":"")+"\n              ")]):e("span",[t._v("- -")])]),t._v(" "),e("div",{staticClass:"info-item"},[e("label",[t._v("当前订单:")]),t._v(" "),t._l(t.personInfoData.orders,function(a,n){return e("span",[e("router-link",{attrs:{to:{path:"/order/orderDetails",query:{orderId:a.orderId,detailsType:1}}}},[t._v(t._s(a.orderNo))])],1)})],2)]):t._e()])],1)])],1)],1)},staticRenderFns:[]}}});
//# sourceMappingURL=24.5d045481c16741158d62.js.map