webpackJsonp([25],{1849:function(e,t,a){function r(e){a(2085)}var o=a(108)(a(2010),a(2135),r,null,null);e.exports=o.exports},2010:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a(388),o=a.n(r),n=a(125),l=a.n(n),s=a(387),i=a(390),d=a.n(i);t.default={data:function(){return{validloginPwd:!0,disabledPhone:!1,dialogTitle:"新增门店人员",placeholderloginPwd:"请输入密码",loading:!1,addUserForm:{id:"",realName:"",phone:"",loginPwd:"",storeId:[],storeDialogIsShow:!1,treeDialog:{type:!1,name:"",routerAuth:[],checkedValue:[]}},searchData:{country:[],storeId:"",phone:""},defaultProps:{children:"children",label:"label"},storeData:[],tableData:[],rules:{realName:[{required:!0,message:"请输入姓名",trigger:"blur"}],phone:[{required:!0,message:"请输入联系方式",trigger:"blur"}],loginPwd:[{required:this.validloginPwd,message:"请输入密码",trigger:"blur"}],"treeDialog.checkedValue":[{type:"array",required:!0,message:"请选择区域",trigger:"change"}]}}},computed:{treeCountry:function(){return this.addUserForm.treeDialog.routerAuth},handlerCountryText:function(){return this.countryText.join("/")},defaultCheckedData:function(){return this.defaultCheckedKeys},tabHeight:function(){return this.$store.state.include.tableHeight-355}},mounted:function(){this.data_table()},methods:{btn_auth:function(e){return this.$store.state.user.AUTHIDS.split(",").some(function(t){return t===e})},handlerData_del:function(e){var t=this;swal({title:"你确定要删除该员工?",type:"warning",showCancelButton:!0,reverseButtons:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(){s.a.data_deliveryPersonStoreDel({id:e.id}).then(function(e){1===e.data.code&&(t.data_table(),t.$message({duration:1500,message:"操作成功！"}))})},function(){})},handleClose:function(e){this.addUserForm.id="",this.addUserForm.realName="",this.addUserForm.loginPwd="",this.addUserForm.phone="",this.addUserForm.storeDialogIsShow=!1,this.$refs.addUserForm.resetFields(),this.addUserForm.treeDialog={type:!1,name:"",routerAuth:this.$store.state.select.treeCountry},this.$refs.tree.setCheckedKeys([])},save_dataTable:function(){var e=this;new l.a(function(t){e.addUserForm.treeDialog.checkedValue=e.$refs.tree.getCheckedNodes(),t()}).then(function(t){e.$refs.addUserForm.validate(function(t){if(!t)return!1;var a=e.$refs.tree.getCheckedKeys().sort(function(e,t){return e-t});if(a.length>1)return e.$message({duration:1500,message:"只能选择一个门店"}),!1;s.a.data_deliveryPersonStoreSave({id:e.addUserForm.id,realName:e.addUserForm.realName,phone:e.addUserForm.phone,loginPwd:d()(e.addUserForm.loginPwd),storeId:a.join("-")}).then(function(t){1===t.data.code&&(e.data_table(),e.handleClose(),e.$message({duration:1500,message:"操作成功！"}))})})})},handlerData_edit:function(e){var t=this;this.addUserForm.storeDialogIsShow=!0,this.get_allAreaAndStore();var a=this;a.$nextTick(function(){if(e.id){a.dialogTitle="编辑门店人员";var r=e.storeId.toString().split(",").map(function(e){return parseInt(e)});t.disabledPhone=!0,t.validloginPwd=!1,t.placeholderloginPwd="若不填写则不修改原始密码",t.$refs.tree.setCheckedKeys(r),t.defaultCheckedKeys=r,t.addUserForm.id=e.id,t.addUserForm.loginPwd="",t.addUserForm.realName=e.realName,t.addUserForm.phone=e.phone}else a.dialogTitle="新增门店人员",t.placeholderloginPwd="请输入密码",t.disabledPhone=!1,t.validloginPwd=!0,a.$refs.tree.setCheckedKeys([])})},get_allAreaAndStore:function(){var e=this;return new l.a(function(t){s.a.fetch_allAreaAndStore().then(function(a){var r=a.data.dat;e.iterationTree(r),e.addUserForm.treeDialog.routerAuth=r,t()})})},iterationTree:function(e){var t=this;e.forEach(function(e,a){e.id<999999&&o()(e,{disabled:!0}),e.children&&e.children.length>0&&t.iterationTree(e.children)})},resetForm:function(){this.searchData.country=[],this.searchData.storeId="",this.searchData.phone=""},fetchStoreData:function(e){this.get_storeOfArea(e[e.length-1])},get_storeOfArea:function(e){var t=this;s.a.fetch_storeOfArea({district:e}).then(function(e){t.searchData.storeId="",t.storeData=[{value:"",label:"请选择门店"}],t.storeData=t.storeData.concat(e.data.dat)})},data_table:function(e){var t=this,a={page:e-1||0,phone:t.searchData.phone,province:"",city:"",district:"",storeId:t.searchData.storeId};t.searchData.country.length>0&&o()(a,{province:t.searchData.country[0],city:t.searchData.country[1],district:t.searchData.country[2]}),t.loading=!0,s.a.data_deliveryPersonStoreTable(a).then(function(e){t.loading=!1,1===e.data.code&&(t.tableData=e.data.dat)})}}}},2047:function(e,t,a){t=e.exports=a(1830)(!0),t.push([e.i,".delivery-personStore .content-table{margin-bottom:20px}.delivery-personStore .is-disabled .el-input__inner{color:#48576a!important}.delivery-personStore .el-tree{height:200px;overflow-y:auto;border:1px solid #ddd;border-radius:4px}","",{version:3,sources:["D:/www.github.com/product/product/src/components/manage-delivery/childrens/storePerson.vue"],names:[],mappings:"AACA,qCACE,kBAAoB,CACrB,AACD,oDACE,uBAA0B,CAC3B,AACD,+BACE,aAAc,AACd,gBAAiB,AACjB,sBAAuB,AACvB,iBAAmB,CACpB",file:"storePerson.vue",sourcesContent:["\n.delivery-personStore .content-table {\n  margin-bottom: 20px;\n}\n.delivery-personStore .is-disabled .el-input__inner {\n  color: #48576a !important;\n}\n.delivery-personStore .el-tree {\n  height: 200px;\n  overflow-y: auto;\n  border: 1px #ddd solid;\n  border-radius: 4px;\n}\n"],sourceRoot:""}])},2085:function(e,t,a){var r=a(2047);"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);a(1831)("bc138c64",r,!0)},2135:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"delivery-personStore"},[a("div",{staticClass:"search-table"},[a("el-form",[a("el-row",{staticStyle:{"margin-bottom":"15px"},attrs:{gutter:10}},[a("el-col",{attrs:{span:5}},[a("el-button",{attrs:{disabled:!e.btn_auth("b_mdry_xz")},on:{click:e.handlerData_edit}},[e._v("新增门店人员")])],1)],1),e._v(" "),a("el-row",{attrs:{gutter:10}},[a("el-col",{attrs:{span:5}},[a("el-form-item",[a("div",{staticClass:"country-select"},[a("el-cascader",{attrs:{options:this.$store.state.select.country,props:this.$store.state.select.defaultCountryProps,placeholder:"请选择区域"},on:{change:e.fetchStoreData},model:{value:e.searchData.country,callback:function(t){e.searchData.country=t},expression:"searchData.country"}})],1)])],1),e._v(" "),a("el-col",{attrs:{span:5}},[a("el-form-item",[a("el-select",{attrs:{placeholder:"请选择门店"},model:{value:e.searchData.storeId,callback:function(t){e.searchData.storeId=t},expression:"searchData.storeId"}},e._l(e.storeData,function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.val}})}))],1)],1),e._v(" "),a("el-col",{attrs:{span:5}},[a("el-form-item",[a("el-input",{attrs:{placeholder:"手机号"},model:{value:e.searchData.phone,callback:function(t){e.searchData.phone=t},expression:"searchData.phone"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:4}},[a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.data_table}},[e._v("查询")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.resetForm}},[e._v("重置")])],1)],1)],1)],1)],1),e._v(" "),a("div",{staticClass:"content-table"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading.body",value:e.loading,expression:"loading",modifiers:{body:!0}}],ref:"multipleTable",staticStyle:{width:"100%"},attrs:{"max-height":e.tabHeight,height:e.tabHeight,data:e.tableData.details,border:"","tooltip-effect":"dark"}},[a("el-table-column",{attrs:{align:"center","min-width":"150",label:"姓名"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.realName))]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"phone",label:"手机号"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"storeName",label:"门店","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[e.btn_auth("b_mdry_bj")?a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){e.handlerData_edit(t.row)}}},[e._v("编辑")]):e._e(),e._v(" "),e.btn_auth("b_mdry_sc")?a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){e.handlerData_del(t.row)}}},[e._v("删除")]):e._e()]}}])})],1)],1),e._v(" "),a("div",{staticClass:"content-table-pagination"},[a("el-pagination",{attrs:{"page-sizes":[20],"page-size":100,layout:"total, sizes, prev, pager, next, jumper",total:e.tableData.rowsCount},on:{"current-change":e.data_table}})],1),e._v(" "),a("el-dialog",{attrs:{title:e.dialogTitle,visible:e.addUserForm.storeDialogIsShow,size:"small","before-close":e.handleClose},on:{"update:visible":function(t){e.addUserForm.storeDialogIsShow=t}}},[a("el-form",{ref:"addUserForm",attrs:{model:e.addUserForm,rules:e.rules,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"姓名: ",prop:"realName"}},[a("el-input",{attrs:{placeholder:"请输入姓名"},model:{value:e.addUserForm.realName,callback:function(t){e.addUserForm.realName=t},expression:"addUserForm.realName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"手机号: ",prop:"phone"}},[a("el-input",{attrs:{placeholder:"请输入手机号",disabled:e.disabledPhone},model:{value:e.addUserForm.phone,callback:function(t){e.addUserForm.phone=t},expression:"addUserForm.phone"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"密码: ",prop:"loginPwd"}},[a("el-input",{attrs:{type:"password",placeholder:e.placeholderloginPwd},model:{value:e.addUserForm.loginPwd,callback:function(t){e.addUserForm.loginPwd=t},expression:"addUserForm.loginPwd"}})],1),e._v(" "),a("el-form-item",{staticClass:"area-box",attrs:{label:"选择区域: ",prop:"treeDialog.checkedValue"}},[a("el-tree",{ref:"tree",attrs:{data:this.treeCountry,"show-checkbox":"","node-key":"id","default-expanded-keys":e.defaultCheckedData,"default-expand-all":"","check-strictly":""}})],1),e._v(" "),a("el-form-item",{staticStyle:{margin:"0","text-align":"right"}},[a("el-button",{on:{click:e.handleClose}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.save_dataTable}},[e._v("确定")])],1)],1)],1)],1)},staticRenderFns:[]}}});
//# sourceMappingURL=25.f2f0d03b5584718ea199.js.map