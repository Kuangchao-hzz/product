webpackJsonp([27],{1797:function(t,a,e){function n(t){e(1934)}var o=e(118)(e(1846),e(1984),n,"data-v-c0bd71e2",null);t.exports=o.exports},1846:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var n=e(359);a.default={data:function(){return{country:[],center:[121.5273285,31.21515044],zoom:14,mapData:{},personInfoData:{},countryText:[],checkedNodesData:[],treeDialog:{type:!1,name:"",routerAuth:[]},defaultProps:{children:"children",label:"label"}}},computed:{routerAuthData:function(){return this.$store.state.select.treeCountry},handlerCountryText:function(){return this.countryText.join("/")},amapMapData:function(){return this.mapData},userPoints:function(){var t=this,a=[];return this.amapMapData&&this.amapMapData.userPoints&&this.amapMapData.userPoints.forEach(function(e,n){var o=this;a.push({position:[e.loc.x,e.loc.y],events:{click:function(){t.fetch_Data(e.id)},dragend:function(t){o.markers[n].position=[t.lnglat.lng,t.lnglat.lat]}},visible:!0,draggable:!1})}),a},orderLength:function(){if(this.personInfoData.orders)return this.personInfoData.orders.length>"0"}},mounted:function(){this.data_table({provinces:[],cities:[],districts:[],storeIds:[]})},methods:{getCheckedNodes:function(){this.checkedNodesData=this.$refs.tree.getCheckedNodes(),this.fetch_mapData()},fetch_mapData:function(){var t=this,a={provinces:[],cities:[],districts:[],storeIds:[]};t.countryText=[],t.checkedNodesData.forEach(function(e,n){t.countryText.push(e.label),t.handleClose(),e.id<=200?a.provinces.push(e.id):e.id<=2e3&&e.id>200?a.cities.push(e.id):e.id<=2e4&&e.id>2e3?a.districts.push(e.id):a.storeIds.push(e.id)}),t.data_table(a)},handleClose:function(t){this.treeDialog.type=!1},fetchCityData:function(t){this.data_table()},data_table:function(t){var a=this,e=this;n.a.data_personMapTable(t).then(function(t){1!==t.data.code?a.$message(t.data.msg):e.mapData=t.data.dat})},fetch_Data:function(t){var a=this;n.a.data_personMapInfo({id:t}).then(function(t){a.personInfoData=t.data.dat})}},watch:{mapData:function(){var t=this;this.mapData&&this.mapData.point.x&&this.mapData.point.y&&(this.center=[],this.center.push(this.mapData.point.x),this.center.push(this.mapData.point.y)),setTimeout(function(){t.fetch_mapData()},3e4)}}}},1896:function(t,a,e){a=t.exports=e(1772)(!0),a.push([t.i,'.person-map .country-select[data-v-c0bd71e2]{margin-bottom:20px}.person-map .country-select span[data-v-c0bd71e2]{color:#666}.person-map .map-box-card[data-v-c0bd71e2]{width:700px;margin-bottom:20px}.person-map .map-box-card .card-content[data-v-c0bd71e2]{display:-webkit-box;display:-ms-flexbox;display:flex}.person-map .map-box-card .card-content .card-item[data-v-c0bd71e2]{width:200px;display:table;box-sizing:border-box;padding:5px 20px}.person-map .map-box-card .card-content .card-item label[data-v-c0bd71e2]{display:table-cell;vertical-align:middle;text-align:left}.person-map .map-box-card .card-content .card-item span[data-v-c0bd71e2]{display:table-cell;position:relative;float:left;width:100%;text-align:right;margin-bottom:0}.person-map .map-box-content[data-v-c0bd71e2]{width:100%;display:-webkit-box;display:-ms-flexbox;display:flex;border-radius:5px}.person-map .map-box-content .box-content-win[data-v-c0bd71e2]{overflow:hidden;background:#fff}.person-map .map-box-content .box-content-win>div[data-v-c0bd71e2]{width:700px;height:450px;border-radius:4px;margin-right:20px}.person-map .map-box-content .box-content-info[data-v-c0bd71e2]{width:280px;height:300px;background:#c2e1f7;color:#012b6b}.person-map .map-box-content .box-content-info h5[data-v-c0bd71e2]{padding:20px 0 20px 20px;font-size:18px;position:relative;font-weight:400}.person-map .map-box-content .box-content-info h5[data-v-c0bd71e2]:before{content:"";display:block;width:4px;height:30px;background:#012b6b;position:absolute;left:0;top:50%;-webkit-transform:translateY(-50%);transform:translateY(-50%)}.person-map .map-box-content .box-content-info .info-item[data-v-c0bd71e2]{display:table;padding:5px 10px;overflow:hidden;vertical-align:middle}.person-map .map-box-content .box-content-info .info-item label[data-v-c0bd71e2]{width:100px;display:table-cell}.person-map .map-box-content .box-content-info .info-item span[data-v-c0bd71e2]{display:block}',"",{version:3,sources:["D:/www.github.com/project/product/src/components/manage-person/childrens/map.vue"],names:[],mappings:"AACA,6CACE,kBAAoB,CACrB,AACD,kDACI,UAAY,CACf,AACD,2CACE,YAAa,AACb,kBAAoB,CACrB,AACD,yDACI,oBAAqB,AACrB,oBAAqB,AACrB,YAAc,CACjB,AACD,oEACM,YAAa,AACb,cAAe,AACf,sBAAuB,AACvB,gBAAkB,CACvB,AACD,0EACQ,mBAAoB,AACpB,sBAAuB,AACvB,eAAiB,CACxB,AACD,yEACQ,mBAAoB,AACpB,kBAAmB,AACnB,WAAY,AACZ,WAAY,AACZ,iBAAkB,AAClB,eAAiB,CACxB,AACD,8CACE,WAAY,AACZ,oBAAqB,AACrB,oBAAqB,AACrB,aAAc,AACd,iBAAmB,CACpB,AACD,+DACI,gBAAiB,AACjB,eAAiB,CACpB,AACD,mEACM,YAAa,AACb,aAAc,AACd,kBAAmB,AACnB,iBAAmB,CACxB,AACD,gEACI,YAAa,AACb,aAAc,AACd,mBAAoB,AACpB,aAAe,CAClB,AACD,mEACM,yBAA0B,AAC1B,eAAgB,AAChB,kBAAmB,AACnB,eAAoB,CACzB,AACD,0EACQ,WAAY,AACZ,cAAe,AACf,UAAW,AACX,YAAa,AACb,mBAAoB,AACpB,kBAAmB,AACnB,OAAQ,AACR,QAAS,AACT,mCAAoC,AAC5B,0BAA4B,CAC3C,AACD,2EACM,cAAe,AACf,iBAAkB,AAClB,gBAAiB,AACjB,qBAAuB,CAC5B,AACD,iFACQ,YAAa,AACb,kBAAoB,CAC3B,AACD,gFACQ,aAAe,CACtB",file:"map.vue",sourcesContent:["\n.person-map .country-select[data-v-c0bd71e2] {\n  margin-bottom: 20px;\n}\n.person-map .country-select span[data-v-c0bd71e2] {\n    color: #666;\n}\n.person-map .map-box-card[data-v-c0bd71e2] {\n  width: 700px;\n  margin-bottom: 20px;\n}\n.person-map .map-box-card .card-content[data-v-c0bd71e2] {\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n}\n.person-map .map-box-card .card-content .card-item[data-v-c0bd71e2] {\n      width: 200px;\n      display: table;\n      box-sizing: border-box;\n      padding: 5px 20px;\n}\n.person-map .map-box-card .card-content .card-item label[data-v-c0bd71e2] {\n        display: table-cell;\n        vertical-align: middle;\n        text-align: left;\n}\n.person-map .map-box-card .card-content .card-item span[data-v-c0bd71e2] {\n        display: table-cell;\n        position: relative;\n        float: left;\n        width: 100%;\n        text-align: right;\n        margin-bottom: 0;\n}\n.person-map .map-box-content[data-v-c0bd71e2] {\n  width: 100%;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  border-radius: 5px;\n}\n.person-map .map-box-content .box-content-win[data-v-c0bd71e2] {\n    overflow: hidden;\n    background: #fff;\n}\n.person-map .map-box-content .box-content-win > div[data-v-c0bd71e2] {\n      width: 700px;\n      height: 450px;\n      border-radius: 4px;\n      margin-right: 20px;\n}\n.person-map .map-box-content .box-content-info[data-v-c0bd71e2] {\n    width: 280px;\n    height: 300px;\n    background: #c2e1f7;\n    color: #012b6b;\n}\n.person-map .map-box-content .box-content-info h5[data-v-c0bd71e2] {\n      padding: 20px 0 20px 20px;\n      font-size: 18px;\n      position: relative;\n      font-weight: normal;\n}\n.person-map .map-box-content .box-content-info h5[data-v-c0bd71e2]::before {\n        content: '';\n        display: block;\n        width: 4px;\n        height: 30px;\n        background: #012b6b;\n        position: absolute;\n        left: 0;\n        top: 50%;\n        -webkit-transform: translateY(-50%);\n                transform: translateY(-50%);\n}\n.person-map .map-box-content .box-content-info .info-item[data-v-c0bd71e2] {\n      display: table;\n      padding: 5px 10px;\n      overflow: hidden;\n      vertical-align: middle;\n}\n.person-map .map-box-content .box-content-info .info-item label[data-v-c0bd71e2] {\n        width: 100px;\n        display: table-cell;\n}\n.person-map .map-box-content .box-content-info .info-item span[data-v-c0bd71e2] {\n        display: block;\n}\n"],sourceRoot:""}])},1934:function(t,a,e){var n=e(1896);"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);e(1773)("12da57e1",n,!0)},1984:function(t,a){t.exports={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"person-map"},[e("div",{staticClass:"country-select"},[e("span",[t._v("区域 : "+t._s(t.handlerCountryText)+"  ")]),t._v(" "),e("a",{attrs:{href:"javascript:;"},on:{click:function(a){t.treeDialog.type=!0}}},[t._v("切换")])]),t._v(" "),e("div",{staticClass:"content-map"},[e("div",{staticClass:"map-box-card"},[e("el-card",{staticClass:"box-card"},[e("div",{staticClass:"card-content"},[e("div",{staticClass:"card-item"},[e("label",[t._v("待配送订单：")]),t._v(" "),e("span",[t._v("1")])]),t._v(" "),e("div",{staticClass:"card-item"},[e("label",[t._v("配送中订单：")]),t._v(" "),e("span",[t._v("2")])]),t._v(" "),e("div",{staticClass:"card-item"},[e("label",[t._v("今日已送达订单：")]),t._v(" "),e("span",[t._v("3")])])])])],1),t._v(" "),e("div",{staticClass:"map-box-content"},[e("div",{staticClass:"box-content-win"},[e("div",{staticClass:"amap-wrapper"},[e("el-amap",{attrs:{vid:"amap-vue",zoom:t.zoom,center:t.center}},t._l(t.userPoints,function(a,n){return t.userPoints.length>0?e("el-amap-marker",{key:n,attrs:{position:a.position,events:a.events,visible:a.visible,draggable:a.draggable}}):t._e()}))],1)]),t._v(" "),t.personInfoData.id?e("div",{staticClass:"box-content-info"},[e("h5",[t._v("配送员信息")]),t._v(" "),e("div",{staticClass:"info-item"},[e("label",[t._v("配送:")]),t._v(" "),e("span",[e("router-link",{attrs:{to:{path:"/person/personDetails",query:{id:t.personInfoData.id}}}},[t._v(t._s(t.personInfoData.realName))])],1)]),t._v(" "),e("div",{staticClass:"info-item"},[e("label",[t._v("手机:")]),t._v(" "),e("span",[t._v(t._s(t.personInfoData.phone))])]),t._v(" "),e("div",{staticClass:"info-item"},[e("label",[t._v("等级:")]),t._v(" "),e("span",[t._v(t._s(t.personInfoData.level+"级"))])]),t._v(" "),e("div",{staticClass:"info-item"},[e("label",[t._v("当前状态:")]),t._v(" "),t.personInfoData.workStatus?e("span",[t._v("\n          "+t._s("1"==t.personInfoData.workStatus?"抢单中":"")+"\n          "+t._s("2"==t.personInfoData.workStatus?"休息中":"")+"\n          "+t._s("3"==t.personInfoData.workStatus?"配送中":"")+"\n          ")]):e("span",[t._v("- -")])]),t._v(" "),e("div",{staticClass:"info-item"},[e("label",[t._v("当前订单:")]),t._v(" "),t._l(t.personInfoData.orders,function(a,n){return e("span",[e("router-link",{attrs:{to:{path:"/order/orderDetails",query:{orderId:a.orderId,detailsType:1}}}},[t._v(t._s(a.orderNo))])],1)})],2)]):t._e()])]),t._v(" "),e("el-dialog",{attrs:{title:"选择区域",visible:t.treeDialog.type,size:"small","before-close":t.handleClose},on:{"update:visible":function(a){t.treeDialog.type=a}}},[e("el-form",{attrs:{model:t.treeDialog,"label-width":"80px"}},[e("el-form-item",{staticClass:"area-box",attrs:{label:"选择区域: "}},[e("el-tree",{ref:"tree",attrs:{data:this.routerAuthData,"show-checkbox":"","node-key":"id",props:t.defaultProps}})],1),t._v(" "),e("el-form-item",{staticStyle:{"text-align":"right"}},[e("el-button",{on:{click:t.handleClose}},[t._v("取消")]),t._v(" "),e("el-button",{attrs:{type:"primary"},on:{click:t.getCheckedNodes}},[t._v("确定")])],1)],1)],1)],1)},staticRenderFns:[]}}});
//# sourceMappingURL=27.c6e13a76cbb849e91098.js.map